
<html> 
	<head>  
	    <title>徒手写promise1方法</title>  
	</head>

	<body class="testBody"> 
		<div class="testDiv"> 
		</div>
	</body>

	<script type="application/javascript">
		var testDiv = document.getElementsByClassName("testDiv")[0];

		// 初步构建
		var f1 =function(resolve){
			setTimeout(function(){ resolve("f1") }, 3000)
		}

		function Promise(fn){
		  //需要一个成功时的回调
		  var callback;
		  //一个实例的方法，用来注册异步事件
		  this.then = function(done){
		    callback = done;
		  }
		  function resolve(s){
		    callback(s);
		  }
		  fn(resolve);
		}

		new Promise(f1).then(function(val){
		    console.log(val);
		})
	</script> 

</html>