define(["zepto"],function(e){function t(){if(!(this instanceof t))return new t}return(t=t.prototype={realHost:"m.lvmama.com",_init:function(){this.loginUrl="http://"+this.realHost+"/api/router/rest.do?method=api.com.user.getUser&version=1.0.0"},getcookie:function(e){var t=document.cookie.indexOf(e),n=document.cookie.indexOf(";",t);return-1==t?"":unescape(document.cookie.substring(t+e.length+1,n>t?n:document.cookie.length))},setcookie:function(e,t,n,o,i,c){var s=new Date;s.setTime(s.getTime()+n),document.cookie=escape(e)+"="+escape(t)+(s?"; expires="+s.toGMTString():"")+(o?"; path="+o:"/")+(i?"; domain="+i:"")+(c?"; secure":"")},jumpLogin:function(){var e={},t=window.location.href;e.login_third="true",e.onsuccess=this.loginSuccess,e.onfail=this.loginFail,this._fetchQueue(e),window.location.href="http://m.lvmama.com/clutter/login.htm?service="+encodeURIComponent(t)},loginSuccess:function(e){e.sessionId,this.setCookie("lvsessionid",e.sessionId)},loginFail:function(){console.log("登陆失败")},_fetchQueue:function(e){var t=[];for(var n in e)switch(typeof e[n]){case"string":e[n]=e[n];break;case"function":e[n]=e[n].getFunctionName()}return t.push(e),JSON.stringify(t)}})._init(),t}),Function.prototype.getFunctionName=function(){return this.name||this.toString().match(/function\s*([^(]*)\(/)[1]};